<!-- login.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - RewardHub</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="page-transition-overlay"></div>
    
    <nav class="navbar">
        <div class="nav-brand">
            <i class="fas fa-gift"></i>
            <span>RewardHub</span>
        </div>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="register.html">Register</a>
        </div>
    </nav>

    <main class="auth-page">
        <div class="auth-container">
            <div class="auth-card glass">
                <div class="auth-header">
                    <h1>Welcome Back</h1>
                    <p>Login to access your dashboard</p>
                </div>
                
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label><i class="fas fa-envelope"></i> Email</label>
                        <input type="email" id="login-email" required placeholder="Enter your email">
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-lock"></i> Password</label>
                        <div class="password-input">
                            <input type="password" id="login-password" required placeholder="Enter your password">
                            <button type="button" class="toggle-password" onclick="togglePassword('login-password', this)">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="remember-me">
                            <span class="checkmark"></span>
                            Remember me
                        </label>
                        <a href="#" class="forgot-link" onclick="showToast('Contact support to reset password', 'info')">Forgot password?</a>
                    </div>
                    
                    <button type="submit" class="btn-glow btn-full">
                        <span class="btn-text">Login</span>
                        <span class="btn-loader hidden"><i class="fas fa-spinner fa-spin"></i></span>
                    </button>
                </form>
                
                <div class="auth-divider">
                    <span>or</span>
                </div>
                
                <div class="auth-footer">
                    <p>Don't have an account? <a href="register.html">Register now</a></p>
                </div>
                
                <div class="admin-hint">
                    <small>Admin: admin@rewardhub.com / admin123</small>
                </div>
            </div>
        </div>
    </main>

    <div id="toast-container"></div>
    <canvas id="confetti-canvas"></canvas>

    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script>
        document.getElementById('login-form').addEventListener('submit', handleLogin);

        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value;
            
            // Check admin
            if (email === 'admin@rewardhub.com' && password === 'admin123') {
                const adminSession = {
                    id: 'admin',
                    name: 'Administrator',
                    email: 'admin@rewardhub.com',
                    isAdmin: true,
                    points: 999999
                };
                localStorage.setItem('currentUser', JSON.stringify(adminSession));
                showToast('Welcome Admin!', 'success');
                setTimeout(() => window.location.href = 'admin.html', 1000);
                return;
            }
            
            // Check regular users
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            
            if (!user) {
                showToast('Invalid email or password', 'error');
                return;
            }
            
            if (!user.verified) {
                showToast('Please verify your email first', 'error');
                return;
            }
            
            localStorage.setItem('currentUser', JSON.stringify(user));
            showToast('Login successful!', 'success');
            setTimeout(() => window.location.href = 'dashboard.html', 1000);
        }
    </script>
</body>
</html>
